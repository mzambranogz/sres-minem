@using sres.be
@using sres.ut
@{
    ViewBag.Titulo = "Evaluación Criterios";
    ViewBag.SRESDescription = false;
    ConvocatoriaBE convocatoria = (ConvocatoriaBE)ViewData["convocatoria"];
    InscripcionBE inscripcion = (InscripcionBE)ViewData["inscripcion"];
    List<CriterioBE> listaCriterio = (List<CriterioBE>)ViewData["listaCriterio"];
    ConvocatoriaEtapaInscripcionBE convetainsc = (ConvocatoriaEtapaInscripcionBE)ViewData["convetainsc"];
    ConvocatoriaCriterioPuntajeBE convcripuntaje = (ConvocatoriaCriterioPuntajeBE)ViewData["convcripuntaje"];
    decimal total_criterio = listaCriterio.Count();
    decimal ingresados = 0;
    foreach (var cri in listaCriterio) { if (cri.INGRESO_DATOS > 0) { ingresados++; } }
    decimal porcentaje_avance = Decimal.Round(ingresados * 100 / total_criterio);
    string pathFormat = AppSettings.Get<string>("Path.Criterio");
    string obs = inscripcion.OBSERVACION == null ? "" : inscripcion.OBSERVACION;
}

@section scripts_footer{
    <script src="@Url.Content("~/Assets/js/plugins/alert.js")"></script>
    <script src="@Url.Content("~/Assets/js/pages/convocatoria_evaluacioncriterios.js")"></script>
}

<div class="container-fluid mt-5">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="estilo-05" aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a class="text-sres-gris" href="@Url.Action("Index", "Inicio")">Inicio</a></li>
                        <li class="breadcrumb-item"><a class="text-sres-gris" href="@Url.Action("Index", "Convocatoria")">Bandeja</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Evaluación Criterios</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid my-3">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="bg-sres-claro p-3">
                    <div class="row">
                        <div class="col-lg-1 col-md-12 text-left text-lg-center">
                            <div class="estilo-07 estilo-02-force text-sres-oscuro d-inline-block d-lg-block">16</div>
                            <div class="estilo-03 estilo-02-force text-sres-oscuro d-inline-block d-lg-block">Jun</div>
                            <div class="estilo-02 estilo-02-force text-sres-claro d-inline-block d-lg-block">2020</div>
                        </div>
                        <div class="col-lg-11 col-md-12 barra-oscura">
                            <h2 class="estilo-03 text-sres-oscuro text-limit-1">Cumbre Peruana de Ahorro Energético</h2>
                            <p class="estilo-01 text-justify text-sres-gris m-0 text-limit-3" data-limit="1">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. When an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.</p>
                            <div class="text-right d-none d-lg-block"><a class="estilo-01 text-sres-verde leer-mas" href="#">Leer más</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@if (convetainsc != null)
{
    if (convetainsc.REALIZADO == "1")
    {
        <div class="container-fluid mt-5">
            <div class="container">
                <div class="row">
                    <div class="offset-lg-1 col-12">
                        <h1>¡LA EVALUACIÓN DE LOS CRITERIOS FUE REALIZADA!</h1>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="rayado my-5 wow fadeIn"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="offset-lg-9 col-lg-3 col-md-12 col-sm-12 my-3"><a class="btn btn-secondary text-white w-100 mb-3" href="@Url.Action("Index","Convocatoria")">Regresar</a></div>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="container-fluid mb-3">
            <div class="container">
                <div class="rayado wow fadeIn"></div>
            </div>
        </div>
        <div class="container-fluid mb-5">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <p class="estilo-02 text-justify text-sres-azul m-0">Ingrese y complete todos los criterios de evaluación</p>
                        <p class="estilo-01 text-justify text-sres-gris m-0">Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptatum eligendi beatae nesciunt hic reiciendis delectus dolorem molestias ducimus quis recusandae tempore labore et, perferendis, adipisci cumque temporibus id eum aperiam. &nbsp;<a class="text-sres-verde" href="#" target="_blank">Ver más información</a></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="progress" style="height: 25px;">
                            <div class="progress-bar estilo-01 bg-degradado text-limit-1" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: @porcentaje_avance%">@ingresados de @total_criterio criterios registrados</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid my-5">
            <div class="container">
                <div class="row">
                    @if (listaCriterio != null)
                    {
                        if (listaCriterio.Count > 0)
                        {
                            int index = 0;
                            string bg = "";
                            string linea = "";
                            string icono = "";
                            string pathDirectoryRelative = "";
                            foreach (CriterioBE item in listaCriterio)
                            {
                                index++;
                                <div class="col-lg-3 col-md-6 col-sm-12 text-center my-3">
                                    @{bg = item.INGRESO_DATOS == 0 ? "bg-sres-claro" : "bg-sres-verde-claro";
                                linea = item.INGRESO_DATOS == 0 ? "border-linea" : "border-linea-verde";
                                icono = item.INGRESO_DATOS == 0 ? "" : "<i class='fas fa-copy text-sres-verde indicador'></i>";
                                pathDirectoryRelative = string.Format(pathFormat, item.ID_CRITERIO);
                                    }

                                    @Html.Raw(icono)
                                    <a class="d-block @bg @linea rounded h-100 p-3" href="@Url.Content($"~/Convocatoria/{convocatoria.ID_CONVOCATORIA}/EvaluacionCriterio/{item.ID_CRITERIO}")">
                                        <img class="img-fluid" src="@Url.Content($"~/{pathDirectoryRelative}/{item.ARCHIVO_BASE}")">
                                        <div class="estilo-01 text-sres-azul pt-3">@item.NOMBRE</div>
                                    </a>
                                </div>
                             }
                         }
                     }
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group mt-5">
                            <label class="estilo-02 text-sres-azul">EVALUACIÓN DE CRITERIOS</label>
                            <div class="input-group">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="rad-evaluacion-criterios-01" id="rad-eva-cri-01" value="1">
                                    <label class="form-check-label estilo-01" for="rad-eva-cri-01">Aprobado</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="rad-evaluacion-criterios-01" id="rad-eva-cri-02" value="0">
                                    <label class="form-check-label estilo-01" for="rad-eva-cri-02">Desaprobado</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="alert alert-warning" role="alert">
                            <div class="alert-wrap">
                                <div class="form-group">
                                    <label for="txa-observaciones">Observaciones:</label>
                                    <div class="input-group">
                                        <div class="input-group-prepend bg-warning"><span class="input-group-text"><i class="fas fa-comment"></i></span></div>
                                        <!--.form-control-plaintext-->
                                        <textarea class="form-control estilo-01" id="txa-observaciones" cols="30" rows="5" maxlenght="400" placeholder="Ingrese la descripción de sus observaciones">@obs</textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="rayado my-5 wow fadeIn"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="offset-lg-6 col-lg-3 col-md-12 col-sm-12 my-3"><a class="btn btn-secondary text-white w-100 mb-3" href="@Url.Action("Index","Convocatoria")">Regresar</a></div>
                    <div class="col-lg-3 col-md-12 col-sm-12 my-3"><a class="btn btn-primary text-white w-100 mb-3" id="btnGuardar">Guardar</a></div>
                </div>

                <div class="row">
                    <div class="col-12 alert-add">
                    </div>
                </div>
            </div>
        </div>
        }
}
else
{
<div class="container-fluid mb-3">
    <div class="container">
        <div class="rayado wow fadeIn"></div>
    </div>
</div>
<div class="container-fluid mb-5">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <p class="estilo-02 text-justify text-sres-azul m-0">Ingrese y complete todos los criterios de evaluación</p>
                <p class="estilo-01 text-justify text-sres-gris m-0">Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptatum eligendi beatae nesciunt hic reiciendis delectus dolorem molestias ducimus quis recusandae tempore labore et, perferendis, adipisci cumque temporibus id eum aperiam. &nbsp;<a class="text-sres-verde" href="#" target="_blank">Ver más información</a></p>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="progress" style="height: 25px;">
                    <div class="progress-bar estilo-01 bg-degradado text-limit-1" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: @porcentaje_avance%">@ingresados de @total_criterio criterios registrados</div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid my-5">
    <div class="container">
        <div class="row">
            @if (listaCriterio != null)
            {
                if (listaCriterio.Count > 0)
                {
                    int index = 0;
                    string bg = "";
                    string linea = "";
                    string icono = "";
                    string pathDirectoryRelative = "";
                    foreach (CriterioBE item in listaCriterio)
                    {
                        index++;
                        <div class="col-lg-3 col-md-6 col-sm-12 text-center my-3">
                            @{bg = item.INGRESO_DATOS == 0 ? "bg-sres-claro" : "bg-sres-verde-claro";
                                linea = item.INGRESO_DATOS == 0 ? "border-linea" : "border-linea-verde";
                                icono = item.INGRESO_DATOS == 0 ? "" : "<i class='fas fa-copy text-sres-verde indicador'></i>";
                                pathDirectoryRelative = string.Format(pathFormat, item.ID_CRITERIO);
                            }

                            @Html.Raw(icono)
                            <a class="d-block @bg @linea rounded h-100 p-3" href="@Url.Content($"~/Convocatoria/{convocatoria.ID_CONVOCATORIA}/EvaluacionCriterio/{item.ID_CRITERIO}")">
                                <img class="img-fluid" src="@Url.Content($"~/{pathDirectoryRelative}/{item.ARCHIVO_BASE}")">
                                <div class="estilo-01 text-sres-azul pt-3">@item.NOMBRE</div>
                            </a>
                        </div>
                     }
                }
            }
        </div>

        <div class="row">
            <div class="col-12">
                <div class="form-group mt-5">
                    <label class="estilo-02 text-sres-azul">EVALUACIÓN DE CRITERIOS</label>
                    <div class="input-group">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="rad-evaluacion-criterios-01" id="rad-eva-cri-01" value="1">
                            <label class="form-check-label estilo-01" for="rad-eva-cri-01">Aprobado</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="rad-evaluacion-criterios-01" id="rad-eva-cri-02" value="0">
                            <label class="form-check-label estilo-01" for="rad-eva-cri-02">Desaprobado</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12">
                <div class="alert alert-warning" role="alert">
                    <div class="alert-wrap">
                        <div class="form-group">
                            <label for="txa-observaciones">Observaciones:</label>
                            <div class="input-group">
                                <div class="input-group-prepend bg-warning"><span class="input-group-text"><i class="fas fa-comment"></i></span></div>
                                <!--.form-control-plaintext-->
                                <textarea class="form-control estilo-01" id="txa-observaciones" cols="30" rows="5" maxlenght="400" placeholder="Ingrese la descripción de sus observaciones">@obs</textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="rayado my-5 wow fadeIn"></div>
            </div>
        </div>
        <div class="row">
            <div class="offset-lg-6 col-lg-3 col-md-12 col-sm-12 my-3"><a class="btn btn-secondary text-white w-100 mb-3" href="@Url.Action("Index","Convocatoria")">Regresar</a></div>
            <div class="col-lg-3 col-md-12 col-sm-12 my-3"><a class="btn btn-primary text-white w-100 mb-3" id="btnGuardar">Guardar</a></div>
        </div>

        <div class="row">
            <div class="col-12 alert-add">
            </div>
        </div>
    </div>
</div>
}


<script>
    const idConvocatoria = @convocatoria.ID_CONVOCATORIA;
    const idEtapa = @convocatoria.ID_ETAPA;
    const idInscripcion = @inscripcion.ID_INSCRIPCION;
    const eva = @inscripcion.ID_TIPO_EVALUACION;
    const puntaje = @convcripuntaje.PUNTAJE;
</script>